!function(){function e(e,t={}){const l=e,n=l.multiple,a={liveSearch:!1,maxSelections:1/0,placeholder:"Select...",clearAllButton:!1,selectOptgroups:!1,selectAllOption:!1,closeOnSelect:!0,allowEmpty:!1,...t},s=document.createElement("div");s.classList.add("snap-select"),l.parentNode.insertBefore(s,l),s.appendChild(l);const c=document.createElement("div");c.classList.add("snap-select-selected"),s.appendChild(c);const o=document.createElement("div");o.classList.add("snap-select-tags"),c.appendChild(o);const d=document.createElement("div");let i,p;function r(){o.innerHTML="";const e=Array.from(l.selectedOptions);if(0===e.length){const e=document.createElement("span");e.classList.add("snap-select-placeholder"),e.textContent=a.placeholder,o.appendChild(e)}else e.forEach((e=>{const t=document.createElement("div");t.classList.add("snap-select-tag"),t.textContent=e.textContent;const l=document.createElement("span");l.classList.add("snap-select-remove"),l.textContent="×",l.addEventListener("click",(t=>{t.stopPropagation(),e.selected=!1,r(),u()})),t.appendChild(l),o.appendChild(t)}));if(n&&a.clearAllButton&&e.length>0){const e=document.createElement("span");e.classList.add("snap-select-clear-all"),e.textContent="×",e.addEventListener("click",(e=>{e.stopPropagation(),l.querySelectorAll("option").forEach((e=>e.selected=!1)),r(),u()})),o.appendChild(e)}}function u(){const e=i?i.value.toLowerCase():"";Array.from(d.querySelectorAll(".snap-select-optgroup")).forEach((t=>{let n=!1;Array.from(t.querySelectorAll(".snap-select-item")).forEach((t=>{const a=l.querySelector(`option[value="${t.dataset.value}"]`),s=t.dataset.key?t.dataset.key.toLowerCase():"";a&&a.selected?t.style.display="none":t.textContent.toLowerCase().includes(e)||s.includes(e)?(t.style.display="",n=!0):t.style.display="none"})),t.querySelector(".snap-select-optgroup-label").textContent.toLowerCase().includes(e)||n?t.style.display="":t.style.display="none"})),Array.from(d.querySelectorAll(".snap-select-item")).forEach((t=>{const n=l.querySelector(`option[value="${t.dataset.value}"]`),a=t.dataset.key?t.dataset.key.toLowerCase():"";!t.dataset.optgroup&&n&&n.selected?t.style.display="none":t.dataset.optgroup||!t.textContent.toLowerCase().includes(e)&&!a.includes(e)?t.dataset.optgroup||(t.style.display="none"):t.style.display=""}))}function y(e){o.innerHTML="";const t=document.createElement("div");if(t.classList.add("snap-select-single-selected-text"),t.textContent=e,a.allowEmpty){const e=document.createElement("span");e.classList.add("snap-select-clear-all"),e.textContent="×",e.style.float="right",e.addEventListener("click",(e=>{e.stopPropagation(),l.value="",y(a.placeholder)})),t.appendChild(e),t.style.display="inline-block",t.style.width="calc(100% - 4px)"}o.appendChild(t)}if(d.classList.add("snap-select-items"),s.appendChild(d),a.liveSearch){const e=document.createElement("div");e.classList.add("snap-select-search-wrapper"),d.appendChild(e),i=document.createElement("input"),i.classList.add("snap-select-search"),i.setAttribute("placeholder","Search..."),e.appendChild(i),p=document.createElement("span"),p.classList.add("snap-select-clear-search"),p.textContent="×",p.style.display="none",p.addEventListener("click",(()=>{i.value="",p.style.display="none",u()})),e.appendChild(p),i.addEventListener("input",(()=>{p.style.display=i.value?"inline":"none",u()}))}if(c.addEventListener("click",(e=>{e.stopPropagation(),d.style.display="block"===d.style.display?"none":"block",function(){if(d.innerHTML="",a.liveSearch&&i&&d.appendChild(i.parentElement),n&&a.selectAllOption){const e=document.createElement("div");e.classList.add("snap-select-item","snap-select-all"),e.textContent="Select All",e.addEventListener("click",(e=>{e.stopPropagation();let t=0;Array.from(l.options).forEach((e=>{!e.selected&&l.selectedOptions.length<a.maxSelections&&(e.selected=!0,t++)})),t>0&&(r(),u())})),d.appendChild(e)}Array.from(l.children).forEach((e=>{if("OPTGROUP"===e.tagName){const t=document.createElement("div");t.classList.add("snap-select-optgroup");const s=document.createElement("div");s.classList.add("snap-select-optgroup-label"),s.textContent=e.label,n&&a.selectOptgroups&&s.addEventListener("click",(t=>{t.stopPropagation();let n=0;Array.from(e.children).forEach((e=>{l.selectedOptions.length<a.maxSelections&&!e.selected&&(e.selected=!0,n++)})),n>0&&(r(),u())})),t.appendChild(s),Array.from(e.children).forEach((e=>{const s=document.createElement("div");s.textContent=e.textContent,s.dataset.value=e.value,s.dataset.key=e.dataset.key||"",s.classList.add("snap-select-item"),n&&e.selected&&(s.style.display="none"),s.addEventListener("click",(t=>{t.stopPropagation(),n?l.selectedOptions.length<a.maxSelections&&(e.selected=!0,r(),u(),a.closeOnSelect&&(d.style.display="none")):(l.value=e.value,y(e.textContent),d.style.display="none")})),t.appendChild(s)})),d.appendChild(t)}else if("OPTION"===e.tagName){const t=document.createElement("div");t.textContent=e.textContent,t.dataset.value=e.value,t.dataset.key=e.dataset.key||"",t.classList.add("snap-select-item"),t.dataset.optgroup="",t.addEventListener("click",(t=>{t.stopPropagation(),n?l.selectedOptions.length<a.maxSelections&&(e.selected=!0,r(),u(),a.closeOnSelect&&(d.style.display="none")):(l.value=e.value,y(e.textContent),d.style.display="none")})),d.appendChild(t)}})),a.liveSearch&&i&&u()}()})),document.addEventListener("click",(e=>{s.contains(e.target)||(d.style.display="none")})),n)r();else{const e=l.querySelector("option:checked");y(e?e.textContent:a.placeholder)}}window.SnapSelect=function(t,l){document.querySelectorAll(t).forEach((t=>{new e(t,l)}))},"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=e)}();
